webpackJsonp([2],{"48jc":function(t,e){},"8e+H":function(t,e){},"8q21":function(t,e){},MGw8:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("Z1y9"),i=a("//Fk"),n=a.n(i),l="id",r="parentId",s="children";function c(t){for(var e=[],a={},o=0;o<t.length;o++)for(var i in t[o])t[o].label=t[o].name+"-----"+t[o].targetUrl;for(var n=0,c=t.length;n<c;n++)a[t[n][l]]=t[n];for(var d=0,u=t.length;d<u;d++)a[t[d][r]]&&t[d][l]!=t[d][r]?(a[t[d][r]][s]||(a[t[d][r]][s]=[]),a[t[d][r]][s].push(t[d])):e.push(t[d]);return e}var d={mounted:function(){var t=this;new n.a(function(e,a){Object(o.a)({url:"/resources/all",method:"get"}).then(function(e){var a=e.data.data;t.tree=c(a)}).catch(function(t){a(t)})})},data:function(){return{tree:[],dialogFormVisible:!1,form:{name:"",label:"",code:"",description:"",type:"1",id:"",targetUrl:"",parentId:"",data:"",children:[]},formLabelWidth:"120px"}},methods:{getUrl:function(){var t=this;new n.a(function(e,a){Object(o.a)({url:"/resources/all",method:"get"}).then(function(e){var a=e.data.data;t.tree=c(a)}).catch(function(t){a(t)})})},addUrl:function(t){var e=this;new n.a(function(a,i){Object(o.a)({url:"/resources/add",method:"post",data:t}).then(function(t){var a=t.data;1==a.code&&e.getUrl()}).catch(function(t){i(t)})})},removeUrl:function(t){var e=this;new n.a(function(a,i){Object(o.a)({url:"/resources/delete/"+t,method:"post"}).then(function(t){1==t.data.code&&e.getUrl()}).catch(function(t){i(t)})})},parentClick:function(){this.dialogFormVisible=!0,this.form.parentId=0},append:function(t){this.dialogFormVisible=!0,this.form.parentId=t.id},addResources:function(){this.form.label=this.form.name+"-----"+this.form.targetUrl;var t=this.form;this.addUrl(t),this.form={},this.dialogFormVisible=!1},remove:function(t,e){var a=e.id;this.removeUrl(a)},renderContent:function(t,e){var a=this,o=e.node,i=e.data;e.store;return t("span",{class:"custom-tree-node"},[t("span",[o.label]),t("span",[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){return a.append(i)}}},["添加"]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){return a.remove(o,i)}}},["删除"])])])},nodeClick:function(t){}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("div",{staticClass:"add-btn"},[a("el-button",{staticClass:"el-button--primary el-button",on:{click:t.parentClick}},[t._v("添加")])],1),t._v(" "),a("div",{staticClass:"tree"},[a("el-tree",{attrs:{data:t.tree,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,"render-content":t.renderContent},on:{"check-change":t.nodeClick}})],1),t._v(" "),a("el-dialog",{attrs:{title:"菜单添加",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"菜单名称","label-width":t.formLabelWidth}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"资源识别码","label-width":t.formLabelWidth}},[a("el-input",{model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"菜单种类","label-width":t.formLabelWidth}},[a("el-input",{model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"链接地址","label-width":t.formLabelWidth}},[a("el-input",{model:{value:t.form.targetUrl,callback:function(e){t.$set(t.form,"targetUrl",e)},expression:"form.targetUrl"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"描述","label-width":t.formLabelWidth}},[a("el-input",{model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addResources}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(d,u,!1,function(t){a("SfFo"),a("d8z9")},"data-v-557fd2cb",null).exports,m=a("mvHQ"),b=a.n(m),v={mounted:function(){var t=this;new n.a(function(e,a){Object(o.a)({url:"/role/all",method:"get"}).then(function(e){var a=e.data;t.tableData=a.data}).catch(function(t){a(t)})})},data:function(){return{tableData:[],dialogFormVisible:!1,dialogEditFormVisible:!1,dialogEditFormId:"",form:{name:"",description:"",state:"1",id:"",type:[]},formLabelWidth:"120px",editForm:{name:"",label:"",code:"",description:"",type:"1",id:"",targetUrl:"",parentId:"",data:"",children:[]},blockTree:[],defaultProps:{children:"children",label:"name"}}},methods:{deleteRow:function(t,e,a){var i=this,l=a.id,r=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){new n.a(function(a,i){Object(o.a)({url:"/role/delete/"+l,method:"post"}).then(function(a){var o=a.data;1==o.code&&(r.$message({type:"success",message:o.msg}),e.splice(t,1))}).catch(function(t){i(t)})})}).catch(function(){i.$message({type:"info",message:"已取消删除"})})},addBox:function(){},addRole:function(){var t=this;this.dialogFormVisible=!1;var e=t.form;new n.a(function(a,i){Object(o.a)({url:"/role/add",method:"post",data:e}).then(function(e){var a=e.data;1==a.code&&(t.$message({type:"success",message:a.msg}),t.tableData.push(a.data))}).catch(function(t){i(t)})})},editDialog:function(t){var e=this,a=t.id;e.dialogEditFormId=a,new n.a(function(t,i){Object(o.a)({url:"/role/resources/"+a,method:"get"}).then(function(t){var a=t.data;if(1==a.code){var o=c(a.data),i=[];e.editForm=o,e.dialogEditFormVisible=!0;for(var n=0;n<o.length;n++)o[n].selected&&i.push(o[n]);e.$nextTick(function(){e.$refs.editTree.setCheckedNodes(i)})}}).catch(function(t){i(t)})})},editRole:function(){var t=this,e=this.$refs.editTree.getCheckedKeys(),a=this.dialogEditFormId;new n.a(function(i,n){Object(o.a)({url:"/role/authorize/",method:"post",data:{roleIds:b()(a),resIds:e.join(",")}}).then(function(e){var a=e.data;1==a.code&&(t.$message({type:"success",message:a.msg}),t.dialogEditFormVisible=!1)}).catch(function(t){n(t)})})}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"name"}}),t._v(" "),a("el-table-column",{attrs:{prop:"description",label:"description"}}),t._v(" "),a("el-table-column",{attrs:{prop:"id",label:"id"}}),t._v(" "),a("el-table-column",{attrs:{prop:"state",label:"state"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"color-red",attrs:{type:"text",size:"small"},on:{click:function(a){t.deleteRow(e.$index,t.tableData,e.row)}}},[t._v("删除")]),t._v(" "),a("el-button",{staticClass:"color-red",attrs:{type:"text",size:"small"},on:{click:function(a){t.editDialog(e.row)}}},[t._v("编辑")])]}}])})],1),t._v(" "),a("div",{staticClass:"add-btn"},[a("el-button",{staticClass:"el-button--primary el-button",on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("添加")])],1),t._v(" "),a("el-dialog",{attrs:{title:"角色创建",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"name","label-width":t.formLabelWidth}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"description","label-width":t.formLabelWidth}},[a("el-input",{model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addRole}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"角色编辑",visible:t.dialogEditFormVisible},on:{"update:visible":function(e){t.dialogEditFormVisible=e}}},[a("el-tree",{ref:"editTree",attrs:{data:t.editForm,"show-checkbox":"","node-key":"id","default-checked-keys":t.blockTree,"default-expand-all":!0,props:t.defaultProps}}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogEditFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.editRole}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var h={components:{TabMenu:f,RoleMenu:a("VU/8")(v,p,!1,function(t){a("vw5c"),a("8e+H")},"data-v-077ea980",null).exports},data:function(){return{activeName:"first"}},methods:{handleClick:function(t,e){}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("el-tabs",{staticClass:"tab",on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"菜单管理",name:"first"}},[a("tab-menu")],1),t._v(" "),a("el-tab-pane",{attrs:{label:"角色管理",name:"second"}},[a("role-menu")],1),t._v(" "),a("el-tab-pane",{attrs:{label:"后台用户管理",name:"third"}},[t._v("后台用户管理")])],1)],1)},staticRenderFns:[]};var _=a("VU/8")(h,g,!1,function(t){a("8q21"),a("48jc")},"data-v-40abbe9e",null);e.default=_.exports},SfFo:function(t,e){},d8z9:function(t,e){},mvHQ:function(t,e,a){t.exports={default:a("qkKv"),__esModule:!0}},qkKv:function(t,e,a){var o=a("FeBl"),i=o.JSON||(o.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},vw5c:function(t,e){}});